<template>
  <div class="min-h-screen bg-black">
    <!-- Header -->
    <header class="bg-gray-900 text-white shadow-lg border-b border-gray-800">
      <div class="max-w-md mx-auto px-6 py-6">
        <div class="flex items-center justify-between">
          <div>
            <h1 class="text-2xl font-bold">‚öôÔ∏è ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h1>
            <p class="text-gray-400 text-sm">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
          </div>
          <div class="bg-gray-800 rounded-full p-2">
            <span class="text-2xl">üîß</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Admin Stats -->
    <div class="max-w-md mx-auto px-6 py-4">
      <div class="grid grid-cols-2 gap-4 mb-6">
        <div class="bg-gray-900 rounded-2xl p-4 shadow-lg border border-gray-800">
          <div class="text-center">
            <div class="text-2xl font-bold text-white">{{ totalBookings }}</div>
            <div class="text-sm text-gray-400">‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
          </div>
        </div>
        <div class="bg-gray-900 rounded-2xl p-4 shadow-lg border border-gray-800">
          <div class="text-center">
            <div class="text-2xl font-bold text-white">{{ totalUsers }}</div>
            <div class="text-sm text-gray-400">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Admin Actions -->
    <main class="max-w-md mx-auto px-6 pb-24">
      <h3 class="text-lg font-semibold text-white mb-4">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö</h3>
      
      <div class="space-y-4">
        <div v-for="action in adminActions" :key="action.id" 
             class="bg-gray-900 rounded-xl shadow-sm border border-gray-800 overflow-hidden">
          
          <button 
            @click="handleAdminAction(action.action)"
            class="w-full p-4 text-left hover:bg-gray-800 transition-colors duration-200"
          >
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-3">
                <div class="text-2xl">{{ action.emoji }}</div>
                <div>
                  <h4 class="text-white font-medium">{{ action.title }}</h4>
                  <p class="text-sm text-gray-400">{{ action.description }}</p>
                </div>
              </div>
              <div class="text-gray-400">
                <span class="text-lg">‚Üí</span>
              </div>
            </div>
          </button>
        </div>
      </div>

      <!-- System Info -->
      <div class="mt-8 bg-gray-900 rounded-xl p-4 border border-gray-800">
        <h4 class="text-white font-medium mb-3">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h4>
        <div class="space-y-2 text-sm">
          <div class="flex justify-between">
            <span class="text-gray-400">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô:</span>
            <span class="text-white">1.0.0</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-400">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</span>
            <span class="text-green-400">‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-400">‡πÇ‡∏´‡∏°‡∏î:</span>
            <span class="text-yellow-400">Demo</span>
          </div>
        </div>
      </div>
    </main>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'

const totalBookings = ref(0)
const totalUsers = ref(1)

const adminActions = ref([
  {
    id: 1,
    title: '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏≤‡∏™',
    description: '‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö‡∏Ñ‡∏•‡∏≤‡∏™‡πÇ‡∏¢‡∏Ñ‡∏∞',
    emoji: 'üìö',
    action: 'manage-classes'
  },
  {
    id: 2,
    title: '‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô',
    description: '‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ',
    emoji: 'üìä',
    action: 'view-reports'
  },
  {
    id: 3,
    title: '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ',
    description: '‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå',
    emoji: 'üë•',
    action: 'manage-users'
  },
  {
    id: 4,
    title: '‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö',
    description: '‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ',
    emoji: '‚öôÔ∏è',
    action: 'system-settings'
  },
  {
    id: 5,
    title: '‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πâ‡∏° = 100',
    description: '‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô 100 ‡∏û‡∏≠‡∏¢‡∏ï‡πå',
    emoji: 'üí∞',
    action: 'set-points-100'
  },
  {
    id: 6,
    title: '‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
    description: '‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Demo)',
    emoji: 'üóëÔ∏è',
    action: 'clear-data'
  }
])

const handleAdminAction = (action) => {
  switch (action) {
    case 'manage-classes':
      alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏≤‡∏™‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ')
      break
    case 'view-reports':
      alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ')
      break
    case 'manage-users':
      alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ')
      break
    case 'system-settings':
      alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ')
      break
    case 'set-points-100':
      if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πâ‡∏°‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô 100 ‡∏û‡∏≠‡∏¢‡∏ï‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
        // Get current points history
        const pointsHistory = JSON.parse(localStorage.getItem('black-yoga-points-history') || '[]')
        
        // Calculate current points
        const currentPoints = pointsHistory.reduce((total, transaction) => {
          if (transaction.type === 'added') {
            return total + transaction.points
          } else {
            return total - transaction.points
          }
        }, 0)
        
        // Calculate how many points to add to reach 100
        const pointsToAdd = 100 - currentPoints
        
        if (pointsToAdd > 0) {
          // Add new transaction
          const newTransaction = {
            id: `admin-set-${Date.now()}`,
            type: 'added',
            points: pointsToAdd,
            description: '‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï (‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πâ‡∏° = 100)',
            date: new Date().toISOString(),
            emoji: 'üí∞'
          }
          
          pointsHistory.push(newTransaction)
          localStorage.setItem('black-yoga-points-history', JSON.stringify(pointsHistory))
          
          alert(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï ${pointsToAdd} ‡∏û‡∏≠‡∏¢‡∏ï‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! (‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô 100 ‡∏û‡∏≠‡∏¢‡∏ï‡πå)`)
        } else if (pointsToAdd < 0) {
          // If current points > 100, we need to add a deduction transaction
          const deductionTransaction = {
            id: `admin-deduct-${Date.now()}`,
            type: 'used',
            points: Math.abs(pointsToAdd),
            description: '‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï (‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πâ‡∏° = 100)',
            date: new Date().toISOString(),
            emoji: 'üí∞'
          }
          
          pointsHistory.push(deductionTransaction)
          localStorage.setItem('black-yoga-points-history', JSON.stringify(pointsHistory))
          
          alert(`‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! (‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô 100 ‡∏û‡∏≠‡∏¢‡∏ï‡πå)`)
        } else {
          alert('‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ 100 ‡∏û‡∏≠‡∏¢‡∏ï‡πå‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß!')
        }
      }
      break
    case 'clear-data':
      if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Demo ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)')) {
        localStorage.clear()
        alert('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö')
        window.location.reload()
      }
      break
  }
}

onMounted(() => {
  // Load stats from localStorage
  const bookings = JSON.parse(localStorage.getItem('black-yoga-bookings') || '[]')
  totalBookings.value = bookings.length
})
</script>